<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog</title>
  </head>
  <body>
    <h1>Blog</h1>
    <div>
      <!-- div de POSTS -->

      <a href="index.html">
        <input type="button" value="Volver" />
      </a>
      <div id="mensaje"></div>
    </div>
    <h2>Editar Post</h2>

    <p>
      <input
        type="text"
        name="editarTitulo"
        placeholder="editarTitulo"
        id="editarTitulo"
      />

      <br />
      <input
        type="text"
        name="editarAutor"
        placeholder="editarAutor"
        id="editarAutor"
      />

      <br />
      <input
        type="text"
        name="editarHistoria"
        placeholder="editarHistoria"
        id="editarHistoria"
      />
    </p>
    <input type="button" value="Guardar" onclick="funcion_guardarPost()" />
  </body>
  <link rel="stylesheet" href="formas.css" />
</html>
<script type="module">
  import principal from "./principal.js";
  let postId = null;
  principal.mostrarBlog();

  window.funcion_eliminarPost = function (titulo) {
    return principal.eliminarPost(titulo.id);
  };

  window.funcion_editarPost = function (divId) {
    postId = divId;
    const divPrincipal = document.getElementById(postId);

    // childNodes busca elementos dentro de un elemento html padre
    const titulo = divPrincipal.childNodes[1].innerText;
    const autor = divPrincipal.childNodes[3].innerText;
    const historia = divPrincipal.childNodes[5].innerText;

    const editarTitulo = document.getElementById("editarTitulo");
    const editarAutor = document.getElementById("editarAutor");
    const editarHistoria = document.getElementById("editarHistoria");
    editarTitulo.value = titulo;
    editarAutor.value = autor;
    editarHistoria.value = historia;
  };

  window.funcion_guardarPost = function () {
    return principal.guardarPost({
      id: postId,
      titulo: document.getElementById("editarTitulo").value,
      autor: document.getElementById("editarAutor").value,
      historia: document.getElementById("editarHistoria").value,
    });
  };
</script>
